<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>FPLBase: Mesh Pipeline</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,700" rel="stylesheet">
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="commonprojectlogo">
    <img alt="Logo" src="fpl_logo_small.png"/>
  </td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">FPLBase
   </div>
   <div style="font-size:12px;">
	 An open source project by
     <a href="https://developers.google.com/games/#Tools">FPL</a>.
  </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="usergroup0.html"><span>Programmer's&#160;Guide</span></a></li>
      <li><a href="fplbase_api_reference.html"><span>API&#160;reference</span></a></li>
      <li><a href="contributing.html"><span>Contributing</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fplbase_guide_mesh_pipeline.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Mesh Pipeline </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The <code>mesh_pipeline</code> converts <a href="https://en.wikipedia.org/wiki/Spline_(mathematics)">FBX files</a> into <a href="http://google.github.io/flatbuffers/">FlatBuffer</a> files that can be loaded with <code>AssetManager::LoadMesh()</code>.</p>
<p>Most modeling software, such as <a href="http://www.autodesk.com/products/maya/overview">Maya</a> and <a href="https://www.blender.org/">Blender</a>, supports export to FBX, so the <code>mesh_pipeline</code> is an effective way to bring mesh data from your authoring tools into your runtime. </p>
<pre class="fragment">Usage: mesh_pipeline [-b ASSET_BASE_DIR] [-r ASSET_REL_DIR]
                     [-e TEXTURE_EXTENSION] [-f TEXTURE_FORMATS]
                     [-m BLEND_MODE] [-a AXES] [-h] [-c] [-v|-d|-i]
                     FBX_FILE

Pipeline to convert FBX mesh data into FlatBuffer mesh data.
We output a .fplmesh file and (potentially several) .fplmat files,
one for each material. The files have the same base name as
FBX_FILE, with a number appended to the .fplmat files if required.
The .fplmesh file references the .fplmat files.
The .fplmat files reference the textures.

Options:
  -b, --base-dir ASSET_BASE_DIR
  -r, --relative-dir ASSET_REL_DIR
                The .fplmesh file and the .fplmat files are output
                to the ASSET_BASE_DIR/ASSET_REL_DIR directory.
                ASSET_BASE_DIR is the working directory of your app,
                from which all files are loaded. The .fplmesh file
                references the .fplmat file relative to
                ASSET_BASE_DIR, that is, by prefixing ASSET_REL_DIR.
                If ASSET_BASE_DIR is unspecified, use current
                directory. If ASSET_REL_DIR is unspecified, output
                and reference files from ASSET_BASE_DIR.
  -e, --texture-extension TEXTURE_EXTENSION
                material files use this extension for texture files.
                Useful if your textures are externally converted
                to a different file format.
                If unspecified, uses original file extension.
  -f, --texture-formats TEXTURE_FORMATS
                comma-separated list of formats for each output
                texture. For example, if a mesh has two textures
                then `AUTO,F_888` will ensure the second texture's
                material has 8-bits of RGB precision.
                Default is AUTO.
                Valid possibilities:
                           AUTO
                           F_8888
                           F_888
                           F_5551
                           F_565
  -m, --blend-mode BLEND_MODE
                rendering blend mode for the generated materials.
                If texture format has an alpha channel, defaults to
                ALPHA. Otherwise, defaults to OFF.
                Valid possibilities:
                           OFF
                           TEST
                           ALPHA
                           ADD
                           ADDALPHA
                           MULTIPLY
  -a, --axes AXES
                coordinate system of exported file, in format
                    (up-axis)(front-axis)(left-axis)
                where,
                    'up' = [x|y|z]
                    'front' = [+x|-x|+y|-y|+z|-z], is the axis
                      pointing out of the front of the mesh.
                      For example, the vector pointing out of a
                      character's belly button.
                    'left' = [+x|-x|+y|-y|+z|-z], is the axis
                      pointing out the left of the mesh.
                      For example, the vector from the character's
                      neck to his left shoulder.
                For example, 'z+y+x' is z-axis up, positive y-axis
                out of a character's belly button, positive x-axis
                out of a character's left side.
                If unspecified, use file's coordinate system.
  -h, --hierarchy
                output vertices relative to local pivot of each
                sub-mesh. The transforms from parent pivot to local
                pivot are also output.
                This option is necessary for animated meshes.
  -c, --center  ensure world origin is inside geometry bounding box
                by adding a translation if required.
  -v, --verbose output all informative messages
  -d, --details output important informative messages
  -i, --info    output more than details, less than verbose
</pre><h1>Texture Files</h1>
<p><a href="https://en.wikipedia.org/wiki/Spline_(mathematics)">FBX files</a> reference <a href="https://en.wikipedia.org/wiki/Texture_mapping">texture files</a>, but the mapping is not well defined. Most often the texture files are referenced by absolute path, which creates a problem when the set of files is moved to another directory or checked into a <a href="https://en.wikipedia.org/wiki/Version_control">version control system</a>.</p>
<p>Also, it's common for texture files to be processed externally. They may have a new <a href="https://en.wikipedia.org/wiki/Filename_extension">file extension</a>, their names may have a different <a href="https://en.wikipedia.org/wiki/Letter_case">casing</a>, or they may have been renamed to have the same base file name as the <code>FBX</code> file.</p>
<p>The <code>mesh_pipeline</code> therefore searches for texture files in the following order (see <code>FbxMeshParser::FindSourceTextureFileName()</code>):</p>
<ul>
<li><code>FBX directory</code> + <code>texture relative path</code> + <code>texture name</code></li>
<li><code>FBX directory</code> + <code>texture name</code></li>
<li><code>FBX directory</code> + <code>FBX base name</code> + <code>texture extension</code></li>
<li><code>FBX directory</code> + texture and FBX base names in various casings + various image extensions</li>
<li><code>texture name in FBX file</code></li>
</ul>
<p>where "various casings" include,</p>
<ul>
<li>original base name</li>
<li>base name in <a href="https://en.wikipedia.org/wiki/Snake_case">snake_case</a></li>
<li>base name in <a href="https://en.wikipedia.org/wiki/CamelCase">CamelCase</a></li>
</ul>
<p>and "various image extensions" include "jpg", "jpeg", "png", "webp", and "tga".</p>
<p>If a texture file is not found, <code>mesh_pipeline</code> outputs a warning and lists all of the file names that it tried in its search.</p>
<h1>Bone Assignment</h1>
<p>The <code>mesh_pipeline</code> traverses the FBX's scene graph in <a href="https://en.wikipedia.org/wiki/Depth-first_search">depth-first order</a>. A node is output if it is the ancestor of a mesh node&ndash;that is, if it has vertex data somewhere under it.</p>
<p>When <code>--hierarchy</code> is specified, every output node is assigned a bone, and vertex positions are output relative to that bone's transform.</p>
<p>Note that, although the FlatBuffer format supports skinning information with four influences, <code>mesh_pipeline</code> currently only outputs skinning information with a single influence. That is, vertices are attached 100% to a single bone. This limitation will be removed in a later release of <code>mesh_pipeline</code>.</p>
<p>The bone heirarchy output by <code>mesh_pipeline</code> matches the bone hierarchy output by <code>anim_pipeline</code>, in <a href="http://google.github.io/motive/">Motive</a>. The <code>anim_pipeline</code> animations can therefore be applied to the <code>mesh_pipeline</code> meshes.</p>
<h1><a class="anchor" id="fplbase_guide_mesh_pipeline_prebuilts"></a>
Pre-built Binaries</h1>
<p>Pre-built binaries for the <code>mesh_pipeline</code> are distributed in the <code>bin</code> directory.</p>
<ul>
<li>Windows 7: bin/Windows/Release/mesh_pipeline.exe</li>
<li>Mac OS X (10.10.5 Yosemite): bin/Darwin/mesh_pipeline</li>
<li>Linux (Ubuntu 64-bit): bin/Linux/mesh_pipeline</li>
</ul>
<p>To build the <code>mesh_pipeline</code> from source, please see <a class="el" href="fplbase_guide_building_mesh_pipeline.html">building mesh_pipeline</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-49880327-7', 'google.github.io');
ga('send', 'pageview');
</script>
</body>
</html>
